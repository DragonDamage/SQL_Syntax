# SQL теория:

`Structured Query Language (SQL)` - Язык структурированных запросов

`База данных (БД)` - Набор взаимосвязанных данных

`Система управления базами данных (СУБД)` - ПО для управления данными (отвечает за поддержку языка БД, механизмы хранения и извлечения данных)




# SQL Синтаксис:

### Самый обычный запрос `SELECT`
```sql
SELECT * FROM Sample.Tab
WHERE id='id1';

Комментарий:
--SELECT --Выбрать
--* --Все колонки
--FROM --Откуда (из)
--Sample.Tab --Таблицы
--WHERE --Где
--id --наименование колонки
--'id1' --значение в колонке id (ставится в 'одинарные ковычки')

'Резюме - Выбрать всё из таблицы Sample, где id = id1'
```
---

### Запрос с выбором нескольких колонок `IN`

```sql
SELECT * FROM Sample.Tab
WHERE id IN ('id1','id2','id3');

Комментарий:
--IN -- Даёт возможность перечисления нескольких колонок

'Резюме - Выбрать всё из таблицы Sample, где id = id1, id2, id3'
```
---


### Вложенный запрос `DISTINCT`

```sql
SELECT * FROM Sample.Tab
WHERE id IN (SELECT DISTINCT id FROM Sample.Tab WHERE name='Andrey');

Комментарий:
--DISTINCT --Уникальный

'Резюме - Выбрать всё из таблицы Sample, где все id имеют name = Andrey. (Используется обычно если бы в подзапросе была бы другая таблица)'
```
---

--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Найти похожие значения" | LIKE |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT * FROM Sample.Tab
WHERE name LIKE 'Andrey%';
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--LIKE --Находит похожие значения

"Резюме" -- Выбрать всё из таблицы Sample, где name имеет схожесть, например Andrey Bogatyrev, Andrey Mikhailovich, Andrey SQL и т.п.


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Исключить нулёвые значения" | IS NOT |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT * FROM Sample.Tab
WHERE name IS NOT NULL;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--IS NOT --Не
--NULL --Значения равные нулю

"Резюме" -- Выбрать всё из таблицы Sample, где name не равно нулю


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Найти нулёвые значения" | IS NULL |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT * FROM Sample.Tab
WHERE name IS NULL;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--IS --Равны
--NULL --Ноль

"Резюме" -- Выбрать всё из таблицы Sample, где name равно нулю


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Максимально выводимое количество строк" | LIMIT |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT * FROM Sample.Tab
LIMIT 10;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--LIMIT --Максимум

"Резюме" -- Выбрать всё из таблицы Sample, но только первых 10 записей


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Считаем количество" | COUNT |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT COUNT(*) FROM Sample.Tab
WHERE id='id1';
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--COUNT --Подсчитывает количество строк

"Резюме" -- Выбрать и посчитать всё количество строк из таблицы Sample, где id = id1


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Считаем сумму | SUM" |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT SUM(name) FROM Sample.Tab
WHERE id='id1';
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--SUM --Считает сумму значений столбца

"Резюме" -- Выбрать и посчитать сумму всех значений в колонке name из таблицы Sample, где id = id1


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Находим минимальное значение" | MIN |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT MIN(name) FROM Sample.Tab
WHERE id='id1';
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--MIN --Минимальное значение

"Резюме" -- Выбрать и найти минимальное значение в колонке name из таблицы Sample, где id = id1


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Находим максимальное значение" | MAX |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT MAX(name) FROM Sample.Tab
WHERE id='id1';
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--MAX --Максимальное значение

"Резюме" -- Выбрать и найти максимальное значение в колонке name из таблицы Sample, где id = id1


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Находим максимальное значение" | AVG (AVERAGE) |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT AVG(name) FROM Sample.Tab
WHERE id='id1';
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--AVG --Среднее значение

"Резюме" -- Выбрать и найти среднее значение в колонке name из таблицы Sample, где id = id1


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Присваиваем псевдонимы и группируем данные" | AS, GROUP BY |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT country, COUNT(id) AS Users FROM Sample.Tab
GROUP BY country;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--AS --Назначить псевдоним (переименовать на выходе) (Alias)
--GROUP BY --Группировка данных (одинаковые значения будут объединены в одну группу)

"Резюме" -- Выбрать колонки country и "COUNT(id) переименовывается в Users", и посчитать общее количество id из таблицы Sample, и группируем данные по столбцу country (причём все одинаковые значения будут объединены в одну группу)


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Считаем только уникальные значения" | COUNT(DISTINCT) |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT COUNT(DISTINCT id) FROM Sample.Tab;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--COUNT(DISTINCT column) --Посчитать только уникальные значения

"Резюме" -- Выбрать и посчитать только уникальные значения по колонке id из таблицы Sample


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Сортируем в порядке убывания" | ORDER BY DESC |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT country, SUM(money) FROM Sample.Tab
GROUP BY country
ORDER BY 2 DESC;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--ORDER BY 2 DESC --Сортировать по значениям во втором столбце в порядке убывания

"Резюме" -- Выбрать country и сумму money из таблицы Sample, группировать по столбцу country, и сортировать по значениям во втором столбце в порядке убывания


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Сортируем в порядке возрастания" | ORDER BY ASC |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT country, SUM(money) FROM Sample.Tab
GROUP BY country
ORDER BY 2 ASC;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--ORDER BY 2 ASC --Сортировать по значениям во втором столбце в порядке возрастания

"Резюме" -- Выбрать country и сумму money из таблицы Sample, группировать по столбцу country, и сортировать по значениям во втором столбце в порядке возрастания


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "Выкидываем мусор (мелкие значения)" | HAVING |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT country, SUM(money) FROM Sample.Tab
GROUP BY country
HAVING SUM(money)>1000
ORDER BY 2 DESC;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
--HAVING --Оставить только значения равные условию

"Резюме" -- Выбрать country и сумму money из таблицы Sample, группировать по столбцу country, оставить значения только которые больше 1000, и сортировать по значениям во втором столбце в порядке убывания


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
-                                    			     | "XXXXXXX" | JOIN |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
SELECT



Табличка + (Syntax)
| ID | NAME | OLD | COUNTRY |
| -- | ---- | --- | ------- | 
| 1  | Andrey| 28 | Russia  | 




